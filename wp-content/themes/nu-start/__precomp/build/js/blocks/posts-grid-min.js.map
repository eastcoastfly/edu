{"version":3,"names":["$","window","jQuery","currentPage","on","blockSettings","postsgrid_block_settings","presetArgs","block_default_query_args","blockFields","postsgrid_block_fields","queryArgs","paged","ajax","type","url","postsgrid_ajax_object","ajaxurl","dataType","data","action","_ajax_nonce","ajax_nonce","success","res","max","id","hide","append","html","$elements_to_stagger_fade","gsap","utils","toArray","length","set","opacity","y","ScrollTrigger","batch","start","end","duration","onEnter","to","autoAlpha","stagger","onComplete","$targets","this","targets","each","addClass","index","element","attr","$filterForm","find","e","toggleClass","firstOptionValue","children","innerHTML","selectize","plugins","placeholder"],"sources":["../../../source/js/blocks/posts-grid.js"],"sourcesContent":["/* \n\tPostsGrid Block - Scripts\n*/\n\n//\n(function ($, window, document) {\n\t/**\n\t *   ... code out here will run immediately on load\n\t */\n\t//\n\n\t/**\n\t *   ... code in here will run after jQuery says document is ready\n\t */\n\t//\n\t$(function () {\n\t\tlet currentPage = 1;\n\n\t\t$(\"#load-more\").on(\"click\", function () {\n\t\t\t// this has been added via localize script\n\t\t\t// the query arguments fed to the block are just passed directly here\n\t\t\tconst blockSettings = postsgrid_block_settings;\n\t\t\tconst presetArgs = block_default_query_args;\n\t\t\tconst blockFields = postsgrid_block_fields;\n\t\t\tlet queryArgs = presetArgs;\n\n\t\t\t// Do currentPage + 1, because we want to load the next page\n\t\t\tcurrentPage++;\n\n\t\t\t// set the query args directly\n\t\t\tqueryArgs.paged = currentPage;\n\n\t\t\t$.ajax({\n\t\t\t\ttype: \"POST\",\n\t\t\t\turl: postsgrid_ajax_object.ajaxurl,\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata: {\n\t\t\t\t\taction: \"ajax_query_for_posts\",\n\t\t\t\t\t_ajax_nonce: postsgrid_ajax_object.ajax_nonce,\n\t\t\t\t\tpaged: currentPage,\n\t\t\t\t\tblockFields: blockFields,\n\t\t\t\t\tqueryArgs: queryArgs,\n\t\t\t\t},\n\t\t\t\tsuccess: function (res) {\n\t\t\t\t\t//\n\t\t\t\t\tif (queryArgs.paged >= res.max) {\n\t\t\t\t\t\t$(\"#posts-grid--\" + blockSettings.id + \" #load-more\").hide();\n\t\t\t\t\t}\n\n\t\t\t\t\t//\n\t\t\t\t\t$(\"#posts-grid--\" + blockSettings.id + \" .nu__grid > ul\").append(\n\t\t\t\t\t\tres.html\n\t\t\t\t\t);\n\n\t\t\t\t\t$elements_to_stagger_fade = gsap.utils.toArray([\n\t\t\t\t\t\t\".nu__grid .grid-item.is-loaded-by-ajax:not(.is-animated)\",\n\t\t\t\t\t]);\n\n\t\t\t\t\tif ($elements_to_stagger_fade.length) {\n\t\t\t\t\t\t// set the initial state of the elements to faded-out and nudged-down\n\t\t\t\t\t\tgsap.set($elements_to_stagger_fade, {\n\t\t\t\t\t\t\topacity: 0,\n\t\t\t\t\t\t\ty: 30,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// batch animation for all elements\n\t\t\t\t\t\tScrollTrigger.batch($elements_to_stagger_fade, {\n\t\t\t\t\t\t\tstart: \"top 85%\",\n\t\t\t\t\t\t\tend: \"bottom 15%\",\n\t\t\t\t\t\t\tduration: 0.6,\n\t\t\t\t\t\t\tonEnter: (batch) =>\n\t\t\t\t\t\t\t\tgsap.to(batch, {\n\t\t\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t\t\t\tautoAlpha: 1,\n\t\t\t\t\t\t\t\t\tstagger: 0.2,\n\t\t\t\t\t\t\t\t\tonComplete: function () {\n\t\t\t\t\t\t\t\t\t\tlet $targets = this.targets();\n\t\t\t\t\t\t\t\t\t\t$($targets).each(function () {\n\t\t\t\t\t\t\t\t\t\t\t$(this).addClass(\"is-animated\");\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\n\t\t// code is poetry...\n\n\t\t$(\".acf-block.posts-grid\").each(function (index, element) {\n\t\t\tlet $id = $(this).attr(\"id\");\n\n\t\t\tlet $filterForm = $(this).find(\"form\");\n\n\t\t\t$(this).find(\".filteringform\").addClass(\"is-revealed\");\n\n\t\t\tlet $grid_items = $(this).find(\".nu__grid > ul\");\n\n\t\t\tlet $formID = $filterForm.attr(\"name\");\n\n\t\t\tlet $filtering_navicon = $(this).find(\".filtering-navicon\");\n\n\t\t\t$filtering_navicon.on(\"click\", function (e) {\n\t\t\t\t$(this).toggleClass(\"is-revealed\");\n\t\t\t\t// $filterForm.slideToggle();\n\t\t\t});\n\n\t\t\t$(\".js__filteringform select\").each(function (index, element) {\n\t\t\t\t// let $placeholder = $(element).data(\"placeholder\");\n\t\t\t\tlet firstOptionValue = $(element).children()[0].innerHTML;\n\n\t\t\t\t// initialize the Selectize control\n\t\t\t\tvar $select = $(element).selectize({\n\t\t\t\t\tplugins: [\"remove_button\", \"restore_on_backspace\"],\n\t\t\t\t\t// placeholder: $placeholder,\n\t\t\t\t\tplaceholder: firstOptionValue,\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\t// code was poetry...\n\t});\n})(window.jQuery, window, document);\n"],"mappings":"2FAKA,IAAWA,KAsHRC,OAAOC,SA5GP,WACD,IAAIC,EAAc,EAElBH,EAAE,cAAcI,GAAG,SAAS,WAG3B,MAAMC,EAAgBC,yBAChBC,EAAaC,yBACbC,EAAcC,uBACpB,IAAIC,EAAYJ,EAGhBJ,IAGAQ,EAAUC,MAAQT,EAElBH,EAAEa,KAAK,CACNC,KAAM,OACNC,IAAKC,sBAAsBC,QAC3BC,SAAU,OACVC,KAAM,CACLC,OAAQ,uBACRC,YAAaL,sBAAsBM,WACnCV,MAAOT,EACPM,YAAaA,EACbE,UAAWA,GAEZY,QAAS,SAAUC,GAEdb,EAAUC,OAASY,EAAIC,KAC1BzB,EAAE,gBAAkBK,EAAcqB,GAAK,eAAeC,OAIvD3B,EAAE,gBAAkBK,EAAcqB,GAAK,mBAAmBE,OACzDJ,EAAIK,MAGLC,0BAA4BC,KAAKC,MAAMC,QAAQ,CAC9C,6DAGGH,0BAA0BI,SAE7BH,KAAKI,IAAIL,0BAA2B,CACnCM,QAAS,EACTC,EAAG,KAIJC,cAAcC,MAAMT,0BAA2B,CAC9CU,MAAO,UACPC,IAAK,aACLC,SAAU,GACVC,QAAUJ,GACTR,KAAKa,GAAGL,EAAO,CACdF,EAAG,EACHQ,UAAW,EACXC,QAAS,GACTC,WAAY,WACX,IAAIC,EAAWC,KAAKC,UACpBlD,EAAEgD,GAAUG,MAAK,WAChBnD,EAAEiD,MAAMG,SAAS,cAC5B,GACA,MAIA,GAEA,IAIEpD,EAAE,yBAAyBmD,MAAK,SAAUE,EAAOC,GACtCtD,EAAEiD,MAAMM,KAAK,MAEvB,IAAIC,EAAcxD,EAAEiD,MAAMQ,KAAK,QAE/BzD,EAAEiD,MAAMQ,KAAK,kBAAkBL,SAAS,eAEtBpD,EAAEiD,MAAMQ,KAAK,kBAEjBD,EAAYD,KAAK,QAENvD,EAAEiD,MAAMQ,KAAK,sBAEnBrD,GAAG,SAAS,SAAUsD,GACxC1D,EAAEiD,MAAMU,YAAY,cAExB,IAEG3D,EAAE,6BAA6BmD,MAAK,SAAUE,EAAOC,GAEpD,IAAIM,EAAmB5D,EAAEsD,GAASO,WAAW,GAAGC,UAGlC9D,EAAEsD,GAASS,UAAU,CAClCC,QAAS,CAAC,gBAAiB,wBAE3BC,YAAaL,GAElB,GACA,GAGA,G"}